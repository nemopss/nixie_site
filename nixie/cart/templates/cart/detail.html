<style>
    .page_title {
        width: 100%;
        height: 100px;
        font-family: 'GOST Common';
        font-style: normal;
        font-weight: 300;
        font-size: 42px;
        display: block;
        text-align: center;
        color: #DC7A33;
        line-height: 100px;
    }

    .left {
        width: 75%;
        float: left;
    }

    .right {
        width: 25%;
        float: right;
    }

    .cart_section {
        background: #181818;
        height: auto;
        width: 100%;
        display: flex;
        flex-flow: column;
        justify-content: flex-start;
        align-items: center;
    }

    .product_ul {
        display: flex;
        flex-flow: row nowrap;
        position: relative;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        padding: 0;
        list-style: none;
        margin-bottom: 0;
        margin-top: 0;
        font-family: 'GOST Common';
        font-style: normal;
        font-weight: 300;
        font-size: 20px;
        color: #DC7A33;
        line-height: 20px;
    }


    .counter {
        display: grid;
        grid-template-columns: 35px 70px 35px;
        justify-content: center;
        align-items: center;
        position: absolute;
        left: 40%;
        top: 18%;
        width: 125px;
    }

    .main {
        width: 80%;
        margin: 70px;
        display: flex;
        flex-direction: row;
    }



    .product_ul li {
        margin-right: 30px;
    }


    .num {
        margin-right: 30px;
        margin-left: auto;
        font-family: 'GOST Common';
        font-style: normal;
        font-weight: 600;
        font-size: 28px;
        color: #DC7A33;
        line-height: 30px;
    }

    .count {
        font-family: 'GOST Common';
        font-style: normal;
        font-weight: 600;
        font-size: 28px;
        color: #DC7A33;
        line-height: 20px;
    }

    .card {
        width: 100%;
        min-height: 125px;
        display: flex;
        flex-direction: row;
        transition: 0.2s;
        position: relative;
        background: #181818;
        border: 2px solid #DC7A33;
        margin-bottom: 10px;
        border-radius: 10px;
    }

    .card_left {
        flex: 0 0 170px;
        position: relative;
        overflow: hidden; /* Скрываем, что выходит за пределы */
        margin: 5px 10px 5px 5px;
        border-radius: 10px;
    }

    .card_right {
        width: 100%;
    }

    .card_image {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;

    }

    .image > img {
        height: 100%;
        width: 100%;
        object-fit: cover; /* Встраиваем картинку в контейнер card__image */
        transition: 0.2s;

    }

    .image:hover > img {
        transform: scale(1.1);

    }

    .btn_min,
    .btn_plus {
        background: #181818;
        border: 0;
        width: 35px;
        height: 35px;
        margin-top: 50%;
        padding: 0;
    }

    .count {
        margin-left: auto;
        margin-right: auto;
    }

    .btn_min img,
    .btn_plus img,
    .del {
        filter: brightness(50%);
        left: 0;
        top: 0;
    }

    .btn_min img:hover,
    .btn_plus img:hover,
    .del:hover {
        filter: brightness(100%);
        cursor: pointer;
    }

    .del {
        transform: rotate(45deg);
        height: 35px;
        width: 35px;
    }

    .right_div {
        width: 100%;
        height: 125px;
        border: 2px solid #DC7A33;
        margin-left: 10px;
        position: relative;
        flex-flow: column;
        border-radius: 10px;
    }

    .total {
        display: flex;
        flex-direction: row;
        position: relative;
        align-items: center;
        justify-content: center;
    }

    .total_text {
        position: absolute;
        left: 10px;
        top: 10px;
        font-family: 'GOST Common';
        font-style: normal;
        font-weight: 300;
        font-size: 30px;
        color: #DC7A33;
        line-height: 32px;
    }

    .total_num {
        position: absolute;
        top: 10px;
        right: 10px;
        font-family: 'GOST Common';
        font-style: normal;
        font-weight: 600;
        font-size: 28px;
        color: #DC7A33;
        line-height: 30px;
    }

    .card_buy {
        font-family: 'GOST Common';
        text-decoration: none;
        font-style: normal;
        font-weight: 400;
        font-size: 24px;
        display: block;
        width: 80%;
        color: #181818;
        background: #DC7A33;
        position: absolute;
        padding: 7px;
        text-align: center;
        border: 2px solid #DC7A33;
        cursor: pointer; /* Меняем курсор при наведении */
        bottom: 10px;
        margin-left: auto;
        margin-right: auto;
        left: 0;
        right: 0;
        border-radius: 10px;
    }

    .card_buy:hover {
        color: #DC7A33;
        background: #181818;
        border: 2px solid #DC7A33;
    }


    @media (max-width: 1199px) {
        .main {
            width: 90%;
            flex-direction: column;
            margin: 20px;
        }

        .left,
        .right {
            width: 100%;
        }

        .right_div {
            margin-left: 0;
        }

        .card {
            flex-direction: column;
        }

        .product_ul {
            flex-flow: column nowrap;
        }

        .product_ul li {
            margin: auto;
        }

        .product_ul li:last-child {
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .counter {
            position: relative;
            left: 0;
            top: 0;
            width: 150px;
            height: auto;
        }

        .card_left {
            margin: 5% 25% 5% 25%;
            width: 50%;
        }

        .card_buy {
            width: 50%;
        }
    }

    @media (max-width: 599px) {
        .main {
            width: 90%;
            flex-direction: column;
            margin: 20px;
        }

        .left,
        .right {
            width: 100%;
        }

        .right_div {
            margin-left: 0;
        }

        .card {
            flex-direction: column;
        }

        .product_ul {
            flex-flow: column nowrap;
        }

        .product_ul li {
            margin: auto;
        }

        .product_ul li:last-child {
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .counter {
            position: relative;
            left: 0;
            top: 0;
            width: 150px;
            height: auto;
        }

        .card_left {
            margin: 5% 10% 5% 10%;
            width: 80%;
        }
    }
</style>
{% extends 'nixie_app/index.html' %}
{% block 'title' %}Корзина{% endblock %}

{% block 'page_content' %}
    <section class="page_title">
        <a>Корзина</a>
    </section>

    <section class="cart_section">
        <div class="main">
            <div class="left">
                {% for item in cart %}
                    {% if item.quantity != 0 %}
                        {% with product=item.product %}
                            <div class="card">

                                <div class="card_left">
                                    <div class="card_image">
                                        <a href="{{ product.get_absolute_url }}" class="image">
                                            <img src="









                                                    {% if product.image1 %}{{ product.image1.url }}{% else %}{{ "/images/sample.png" }}{% endif %}"/>
                                        </a>
                                    </div>

                                </div>


                                <div class="card_right">
                                    <ul class="product_ul">
                                        <li> {{ product.name }}</li>
                                        <li>
                                            <div class="counter">
                                                <form action="{% url "cart:cart_add" product_id=product.id %}"
                                                      method="post">
                                                    {{ cart_product_form }}
                                                    {% csrf_token %}
                                                    <input type="hidden" name="quantity" value="-1"/>
                                                    <button class='btn_min' type="submit">
                                                        <img width='35' height="35" src="/images/minus.png"/>
                                                    </button>
                                                </form>

                                                <p class="count">{{ item.quantity }}</p>
                                                <form action="{% url "cart:cart_add" product_id=product.id %}"
                                                      method="post">
                                                    {{ cart_product_form }}
                                                    {% csrf_token %}
                                                    <input type="hidden" name="quantity" value="1"/>
                                                    <button class="btn_plus" type="submit">
                                                        <img width='35' height="35" src="/images/plus.png"/>
                                                    </button>
                                                </form>
                                            </div>
                                        </li>
                                        <li class="num">{{ item.total_price }} руб.</li>
                                        <li><a href="{% url "cart:cart_remove" product.id %}"><img class='del'
                                                                                                   src="/images/plus.png"/></a>
                                        </li>
                                    </ul>
                                </div>

                            </div>
                        {% endwith %}
                    {% endif %}
                {% endfor %}
            </div>
            <div class="right">
                <div class="right_div">
                    <div class="total">
                        <div class="total_text">Итого</div>
                        <div class="total_num">{{ cart.get_total_price }} руб.</div>
                    </div>
                    <a href="{% url "orders:order_create" %}" class="card_buy">Купить</a>
                </div>
            </div>
        </div>
    </section>

{% endblock %}